<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial - KiwoomRestApi.Net</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: -20px -20px 40px -20px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav {
            background: #f8f9fa;
            padding: 20px;
            margin: -20px -20px 40px -20px;
            border-bottom: 1px solid #e9ecef;
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
        }

        .nav a {
            color: #495057;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav a:hover {
            color: #667eea;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #34495e;
            margin: 30px 0 15px 0;
            font-size: 1.5rem;
        }

        .code-block {
            position: relative;
            margin: 20px 0;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            z-index: 1;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .copy-btn:hover {
            opacity: 1;
        }

        .step {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .step h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .warning::before {
            content: "âš ï¸ ";
            font-weight: bold;
        }

        .info {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info::before {
            content: "ğŸ’¡ ";
            font-weight: bold;
        }

        .back-to-docs {
            text-align: center;
            margin: 40px 0;
        }

        .back-to-docs a {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: transform 0.3s;
        }

        .back-to-docs a:hover {
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>KiwoomRestApi.Net Tutorial</h1>
            <p>ë‹¨ê³„ë³„ ê°€ì´ë“œë¡œ í‚¤ì›€ì¦ê¶Œ API ë§ˆìŠ¤í„°í•˜ê¸°</p>
        </div>

        <nav class="nav">
            <ul>
                <li><a href="#getting-started">ì‹œì‘í•˜ê¸°</a></li>
                <li><a href="#authentication">ì¸ì¦</a></li>
                <li><a href="#basic-usage">ê¸°ë³¸ ì‚¬ìš©ë²•</a></li>
                <li><a href="#advanced-features">ê³ ê¸‰ ê¸°ëŠ¥</a></li>
                <li><a href="#best-practices">ëª¨ë²” ì‚¬ë¡€</a></li>
                <li><a href="index.html">â† ë©”ì¸ ë¬¸ì„œ</a></li>
            </ul>
        </nav>

        <section id="getting-started" class="section">
            <h2>1. ì‹œì‘í•˜ê¸°</h2>
            
            <div class="step">
                <h4>Step 1: NuGet íŒ¨í‚¤ì§€ ì„¤ì¹˜</h4>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre><code class="language-bash">dotnet add package KiwoomRestApi.Net</code></pre>
                </div>
                <p>ë˜ëŠ” Package Manager Consoleì—ì„œ:</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre><code class="language-bash">Install-Package KiwoomRestApi.Net</code></pre>
                </div>
            </div>

            <div class="step">
                <h4>Step 2: í‚¤ì›€ì¦ê¶Œ API í‚¤ ì¤€ë¹„</h4>
                <p>í‚¤ì›€ì¦ê¶Œ OpenAPI ì‚¬ì´íŠ¸ì—ì„œ ë‹¤ìŒì„ ë°œê¸‰ë°›ìœ¼ì„¸ìš”:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>AppKey</strong>: ì• í”Œë¦¬ì¼€ì´ì…˜ í‚¤</li>
                    <li><strong>SecretKey</strong>: ì‹œí¬ë¦¿ í‚¤</li>
                </ul>
                
                <div class="warning">
                    API í‚¤ëŠ” ì ˆëŒ€ ì†ŒìŠ¤ì½”ë“œì— ì§ì ‘ í•˜ë“œì½”ë”©í•˜ì§€ ë§ˆì„¸ìš”. í™˜ê²½ë³€ìˆ˜ë‚˜ ì„¤ì •íŒŒì¼ì„ ì‚¬ìš©í•˜ì„¸ìš”.
                </div>
            </div>
        </section>

        <section id="authentication" class="section">
            <h2>2. ì¸ì¦ ë° í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”</h2>

            <h3>2.1 ê¸°ë³¸ í´ë¼ì´ì–¸íŠ¸ ìƒì„±</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">using KiwoomRestApi.Net.Clients;

// ì‹¤ê±°ë˜ìš©
var client = KiwoomRestApiClient.Create("your-app-key", "your-secret-key", false);

// ëª¨ì˜íˆ¬ììš©
var mockClient = KiwoomRestApiClient.Create("your-app-key", "your-secret-key", true);</code></pre>
            </div>

            <h3>2.2 ì˜ì¡´ì„± ì£¼ì… ì‚¬ìš© (ê¶Œì¥)</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">using KiwoomRestApi.Net.Extensions;
using Microsoft.Extensions.DependencyInjection;

var services = new ServiceCollection();
services.AddKiwoomRestApi(config => 
{
    config.AppKey = "your-app-key";
    config.SecretKey = "your-secret-key";
    config.IsMock = true; // ëª¨ì˜íˆ¬ì
    config.RequestTimeout = TimeSpan.FromSeconds(30);
});

var serviceProvider = services.BuildServiceProvider();
var client = serviceProvider.GetRequiredService&lt;KiwoomRestApiClient&gt;();</code></pre>
            </div>

            <h3>2.3 ASP.NET Coreì—ì„œ ì‚¬ìš©</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">// Startup.cs ë˜ëŠ” Program.cs
public void ConfigureServices(IServiceCollection services)
{
    services.AddKiwoomRestApi(Configuration["Kiwoom:AppKey"], 
                             Configuration["Kiwoom:SecretKey"], 
                             true); // ëª¨ì˜íˆ¬ì
}

// Controllerì—ì„œ ì‚¬ìš©
[ApiController]
public class StockController : ControllerBase
{
    private readonly KiwoomRestApiClient _kiwoomClient;
    
    public StockController(KiwoomRestApiClient kiwoomClient)
    {
        _kiwoomClient = kiwoomClient;
    }
}</code></pre>
            </div>
        </section>

        <section id="basic-usage" class="section">
            <h2>3. ê¸°ë³¸ ì‚¬ìš©ë²•</h2>

            <h3>3.1 ì£¼ì‹ í˜„ì¬ê°€ ì¡°íšŒ</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">// ì‚¼ì„±ì „ì í˜„ì¬ê°€ ì¡°íšŒ
var stockInfo = await client.StockInfo.GetPresentPriceAsync("005930");

if (stockInfo.IsSuccess && stockInfo.Body != null)
{
    Console.WriteLine($"ì¢…ëª©ëª…: {stockInfo.Body.Data.StockName}");
    Console.WriteLine($"í˜„ì¬ê°€: {stockInfo.Body.Data.CurrentPrice}");
    Console.WriteLine($"ì „ì¼ëŒ€ë¹„: {stockInfo.Body.Data.PrevDiff}");
}</code></pre>
            </div>

            <h3>3.2 ê³„ì¢Œ ì •ë³´ ì¡°íšŒ</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">// ê³„ì¢Œ ëª©ë¡ ì¡°íšŒ
var accounts = await client.Account.GetAccountListAsync();

foreach (var account in accounts.Body.Data)
{
    Console.WriteLine($"ê³„ì¢Œë²ˆí˜¸: {account.AccountNumber}");
    Console.WriteLine($"ê³„ì¢Œëª…: {account.AccountName}");
}

// ê³„ì¢Œ ì”ê³  ì¡°íšŒ
var balance = await client.Account.GetBalanceAsync();
Console.WriteLine($"ì˜ˆìˆ˜ê¸ˆ: {balance.Body.Data.Deposit}");</code></pre>
            </div>

            <h3>3.3 ì°¨íŠ¸ ë°ì´í„° ì¡°íšŒ</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">using KiwoomRestApi.Net.Enums.Chart;

// ì¼ë´‰ ë°ì´í„° ì¡°íšŒ (ìµœê·¼ 30ì¼)
var chartData = await client.Chart.GetDailyChartAsync(
    "005930", 
    ChartPeriod.Day, 
    30);

foreach (var candle in chartData.Body.Data)
{
    Console.WriteLine($"ë‚ ì§œ: {candle.Date}, ì¢…ê°€: {candle.Close}, ê±°ë˜ëŸ‰: {candle.Volume}");
}</code></pre>
            </div>
        </section>

        <section id="advanced-features" class="section">
            <h2>4. ê³ ê¸‰ ê¸°ëŠ¥</h2>

            <h3>4.1 ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë…</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">// WebSocket í´ë¼ì´ì–¸íŠ¸ ìƒì„±
var socketClient = KiwoomSocketClient.Create(client.Token, true);

// ì‹¤ì‹œê°„ í˜¸ê°€ êµ¬ë…
socketClient.OnRealtimeQuoteReceived += (quote) =>
{
    Console.WriteLine($"ì¢…ëª©: {quote.StockCode}, í˜„ì¬ê°€: {quote.CurrentPrice}");
};

await socketClient.WebSocket.SubscribeRealtimeQuoteAsync("005930");</code></pre>
            </div>

            <h3>4.2 CancellationToken ì‚¬ìš©</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">// íƒ€ì„ì•„ì›ƒì´ ìˆëŠ” ìš”ì²­
using var cts = new CancellationTokenSource(TimeSpan.FromSeconds(10));

try
{
    var stockInfo = await client.StockInfo.GetPresentPriceAsync("005930", cts.Token);
    // ì²˜ë¦¬ ë¡œì§
}
catch (OperationCanceledException)
{
    Console.WriteLine("ìš”ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
}</code></pre>
            </div>

            <h3>4.3 ë°°ì¹˜ ë°ì´í„° ì²˜ë¦¬</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre><code class="language-csharp">// ì—¬ëŸ¬ ì¢…ëª©ì˜ í˜„ì¬ê°€ë¥¼ ë³‘ë ¬ë¡œ ì¡°íšŒ
var stockCodes = new[] { "005930", "000660", "035420" };
var tasks = stockCodes.Select(code => client.StockInfo.GetPresentPriceAsync(code));

var results = await Task.WhenAll(tasks);

foreach (var result in results.Where(r => r.IsSuccess))
{
    var data = result.Body.Data;
    Console.WriteLine($"{data.StockName}: {data.CurrentPrice}");
}</code></pre>
            </div>
        </section>

        <section id="best-practices" class="section">
            <h2>5. ëª¨ë²” ì‚¬ë¡€</h2>

            <div class="step">
                <h4>5.1 ì—ëŸ¬ ì²˜ë¦¬</h4>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre><code class="language-csharp">try
{
    var result = await client.StockInfo.GetPresentPriceAsync("005930");
    
    if (!result.IsSuccess)
    {
        Console.WriteLine($"API ì˜¤ë¥˜: {result.ErrorCode} - {result.ErrorMessage}");
        return;
    }
    
    // ì„±ê³µì ì¸ ì²˜ë¦¬
    var data = result.Body.Data;
    Console.WriteLine($"í˜„ì¬ê°€: {data.CurrentPrice}");
}
catch (HttpRequestException ex)
{
    Console.WriteLine($"ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: {ex.Message}");
}
catch (TaskCanceledException ex)
{
    Console.WriteLine($"ìš”ì²­ ì‹œê°„ ì´ˆê³¼: {ex.Message}");
}</code></pre>
                </div>
            </div>

            <div class="step">
                <h4>5.2 ë¦¬ì†ŒìŠ¤ ê´€ë¦¬</h4>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre><code class="language-csharp">// IDisposable íŒ¨í„´ ì‚¬ìš©
using var client = KiwoomRestApiClient.Create(appKey, secretKey, true);
using var socketClient = KiwoomSocketClient.Create(client.Token, true);

// ì‚¬ìš© í›„ ìë™ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ í•´ì œë¨</code></pre>
                </div>
            </div>

            <div class="step">
                <h4>5.3 ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§</h4>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre><code class="language-csharp">services.AddLogging();
services.AddKiwoomRestApi(config =>
{
    config.AppKey = appKey;
    config.SecretKey = secretKey;
    // ìš”ì²­ íƒ€ì„ì•„ì›ƒ ì„¤ì •
    config.RequestTimeout = TimeSpan.FromSeconds(30);
});

// ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ
private readonly ILogger&lt;StockController&gt; _logger;

public async Task&lt;IActionResult&gt; GetStock(string code)
{
    _logger.LogInformation($"ì£¼ì‹ ì •ë³´ ì¡°íšŒ ì‹œì‘: {code}");
    
    var result = await _kiwoomClient.StockInfo.GetPresentPriceAsync(code);
    
    if (result.IsSuccess)
    {
        _logger.LogInformation($"ì£¼ì‹ ì •ë³´ ì¡°íšŒ ì„±ê³µ: {code}");
        return Ok(result.Body.Data);
    }
    else
    {
        _logger.LogWarning($"ì£¼ì‹ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨: {code}, ì˜¤ë¥˜: {result.ErrorMessage}");
        return BadRequest(result.ErrorMessage);
    }
}</code></pre>
                </div>
            </div>

            <div class="info">
                <strong>ì„±ëŠ¥ íŒ:</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>í´ë¼ì´ì–¸íŠ¸ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì¬ì‚¬ìš©í•˜ì„¸ìš” (Singleton íŒ¨í„´)</li>
                    <li>ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ í™œìš©í•˜ì„¸ìš”</li>
                    <li>ì ì ˆí•œ íƒ€ì„ì•„ì›ƒì„ ì„¤ì •í•˜ì„¸ìš”</li>
                    <li>ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ í”¼í•˜ê³  ìºì‹±ì„ ê³ ë ¤í•˜ì„¸ìš”</li>
                </ul>
            </div>

            <div class="warning">
                <strong>ì£¼ì˜ì‚¬í•­:</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>í‚¤ì›€ APIëŠ” í˜¸ì¶œ íšŸìˆ˜ ì œí•œì´ ìˆìŠµë‹ˆë‹¤</li>
                    <li>ì‹¤ê±°ë˜ì™€ ëª¨ì˜íˆ¬ì í™˜ê²½ì„ êµ¬ë¶„í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”</li>
                    <li>ë¯¼ê°í•œ ì •ë³´(API í‚¤, ê³„ì¢Œë²ˆí˜¸)ëŠ” ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ì„¸ìš”</li>
                    <li>ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë… ì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì— ì£¼ì˜í•˜ì„¸ìš”</li>
                </ul>
            </div>
        </section>

        <div class="back-to-docs">
            <a href="index.html">â† ë©”ì¸ ë¬¸ì„œë¡œ ëŒì•„ê°€ê¸°</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        function copyCode(button) {
            const code = button.nextElementSibling.textContent;
            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'ë³µì‚¬ë¨!';
                setTimeout(() => {
                    button.textContent = 'ë³µì‚¬';
                }, 2000);
            });
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>